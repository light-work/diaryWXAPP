<wxs src="../../utils/tools.wxs" module="tools" />
<template name="popNight">
  <view class='night {{nightClass}}'>
    <view class='text-center'>{{nightText}}</view>
  </view>
</template>
<template name="popDialog">
  <view class='pop pop-result' hidden='{{!dialogShow}}'>
    <view class='story' style='height:350rpx;'>
      <view class='text-center'><image src='../../img/jieguo.png' mode='widthFix'></image></view>
      <view class='game-result clearfix'>
            <view class='result-one' wx:for='{{dialogResult}}' wx:key='*this'>
                <view class='title'>{{item.text}}</view>
                <view class='clearfix' wx:if='{{item.effectArray&&item.effectArray.length >0}}'>
                    <view class='view-one' wx:for='{{item.effectArray}}' wx:for-item="effect" wx:key='*this'>
                        <text>{{effect.attrName}}</text>
                        <text class='{{effect.op}}'>{{effect.value}}</text>
                    </view>
                    
                </view>
            </view>
        </view>
      <!-- <text>{{dialogText}}</text> -->
    </view>
    <view class='btn-2' bindtap='dialogOK'>{{dialogBtn}}</view>
  </view>
</template>
<template name="popEvent">
  <view class='pop pop-result' hidden='{{!eventShow}}'>
    <view class='story' style='height:350rpx;min-height:200px;'>
      <view class='text-center'>
        <image src='../../img/ouyu.png' mode='widthFix'></image>
      </view>
      <view class='text-center'>{{eventTitle}}</view>
    </view>

     <view class='btn-2' bindtap='applyEvent' wx:for="{{eventItems}}" wx:key="id" data-id="{{item.id}}">
      {{item.resultText}}
    </view>
  </view>
</template>

<template name="popPlan">
  <view class='pop pop2' hidden='{{!planShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-2.png' ></image>
      <text>日常消遣</text>
      <view class='off' bindtap='closePlan'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时</text>
          </view>
      </view>
      <view class='feed {{tools.isEnableBtn(userState.hours,0)?"":"disable"}}' wx:for='{{planItems}}' wx:key='id' bindtap='applyPlan' data-id='{{item.id}}'>
          <view>{{item.remarks}}</view>
          <view>{{item.title}}</view>
      </view>
    </view>
  </view>
</template>

<template name="popJob">
  <view class='pop pop2' hidden='{{!jobShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-1.png' ></image>
      <text>找工作</text>
      <view class='off' bindtap='closeJob'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text >每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{jobItems}}' wx:key='id'>
        <view class='feed2-left'>
          <view class='job'>{{item.title}}</view>
          <view class='money'>每日工资{{item.price}}元</view>
          <view>{{item.remarks}}</view>
        </view>
        <view wx:if='{{userState.myJobId===item.id}}' class='job-btn in-job disable' ></view>
        <view wx:else class='job-btn  {{tools.isEnableBtn(userState.hours,userState.jobLimit)?"":"disable"}}' bindtap='applyJob' data-id='{{item.id}}'></view>
      </view>
    </view>
  </view>
</template>

<template name="popMyJob">
  <view class='pop pop2' hidden='{{!myJobShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-1.png'></image>
      <text>我的工作</text>
      <view class='off' bindtap='closeMyJob'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>在职期间,每天会带来金钱收入</text>
          </view>
      </view>
      <block wx:for='{{jobItems}}' wx:key='id'>
        <view class='feed2 clearfix' wx:if='{{userState.myJobId===item.id}}'>
          <view class='feed2-left'>
            <view class='job'>{{item.title}}</view>
            <view class='money'>每日工资{{item.price}}元</view>
            <view>{{item.remarks}}</view>
          </view>
          <view  class='job-btn in-job disable'></view>
        </view>
      </block>
    </view>
  </view>
</template>



<template name="popHouse">
  <view class='pop pop2' hidden='{{!houseShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-4.png' ></image>
      <text>购房置业</text>
      <view class='off' bindtap='closeHouse'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{houseItems}}' wx:key='id'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myHouseNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mini1 {{tools.isEnableBtn(userState.hours,userState.houseLimit)?"":"disable"}}' bindtap='buyHouse' data-id='{{item.id}}'>购 买</view>
          <view class='btn-mini2 {{(tools.isEnableBtn(userState.hours,userState.houseLimit)&&tools.arrayContain(userState.myHouseArray,item.id))?"":"disable"}}'
           bindtap='sellHouse' data-id='{{item.id}}'>出 售</view>
      </view>
    </view>
  </view>
</template>

<template name="popMyHouse">
  <view class='pop pop2' hidden='{{!myHouseShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-5.png' ></image>
      <text>我的房产</text>
      <view class='off' bindtap='closeMyHouse'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每天会有日常维护费</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{houseItems}}' wx:key='id' wx:if='{{tools.arrayContain(userState.myHouseArray,item.id)}}'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myHouseNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mid2 {{(tools.isEnableBtn(userState.hours,userState.houseLimit)&&tools.arrayContain(userState.myHouseArray,item.id))?"":"disable"}}'
             bindtap='sellCar' data-id='{{item.id}}'>出 售</view>
      </view>
    </view>
  </view>
</template>


<template name="popCar">
  <view class='pop pop2' hidden='{{!carShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-4.png' ></image>
      <text>座驾排场</text>
      <view class='off' bindtap='closeCar'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{carItems}}' wx:key='id'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myCarNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mini1 {{tools.isEnableBtn(userState.hours,userState.carLimit)?"":"disable"}}' bindtap='buyCar' data-id='{{item.id}}'>购 买</view>
          <view class='btn-mini2 {{(tools.isEnableBtn(userState.hours,userState.carLimit)&&tools.arrayContain(userState.myCarArray,item.id))?"":"disable"}}'
           bindtap='sellCar' data-id='{{item.id}}'>出 售</view>
      </view>
    </view>
  </view>
</template>

<template name="popMyCar">
  <view class='pop pop2' hidden='{{!myCarShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-4.png' ></image>
      <text>我的座驾</text>
      <view class='off' bindtap='closeMyCar'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每天会有日常维护费</text>
          </view>
      </view>
      
      <view class='feed2 clearfix' wx:for='{{carItems}}' wx:key='id' wx:if='{{tools.arrayContain(userState.myCarArray,item.id)}}'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myCarNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mid2 {{(tools.isEnableBtn(userState.hours,userState.carLimit)&&tools.arrayContain(userState.myCarArray,item.id))?"":"disable"}}'
            bindtap='sellCar' data-id='{{item.id}}'>出 售</view>
      </view>
      
    </view>
  </view>
</template>


<template name="popClothes">
  <view class='pop pop2' hidden='{{!clothesShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-5.png' ></image>
      <text>衣锦华服</text>
      <view class='off' bindtap='closeClothes'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{clothesItems}}' wx:key='id'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myClothesNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mini1 {{tools.isEnableBtn(userState.hours,userState.clothesLimit)?"":"disable"}}' bindtap='buyClothes' data-id='{{item.id}}'>购 买</view>
          <view class='btn-mini2 {{(tools.isEnableBtn(userState.hours,userState.clothesLimit)&&tools.arrayContain(userState.myClothesArray,item.id))?"":"disable"}}'
           bindtap='sellClothes' data-id='{{item.id}}'>出 售</view>
      </view>
    </view>
  </view>
</template>

<template name="popMyClothes">
  <view class='pop pop2' hidden='{{!myClothesShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-5.png' ></image>
      <text>衣锦华服</text>
      <view class='off' bindtap='closeMyClothes'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每天会有日常维护费</text>
          </view>
      </view>
      
      <view class='feed2 clearfix' wx:for='{{clothesItems}}' wx:key='id' wx:if='{{tools.arrayContain(userState.myClothesArray,item.id)}}'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myClothesNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mid2 {{(tools.isEnableBtn(userState.hours,userState.clothesLimit)&&tools.arrayContain(userState.myClothesArray,item.id))?"":"disable"}}'
            bindtap='sellClothes' data-id='{{item.id}}'>出 售</view>
      </view>
      
    </view>
  </view>
</template>


<template name="popLuxury">
  <view class='pop pop2' hidden='{{!luxuryShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-6.png' ></image>
      <text>仪丈排场</text>
      <view class='off' bindtap='closeLuxury'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{luxuryItems}}' wx:key='id'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myLuxuryNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mini1 {{tools.isEnableBtn(userState.hours,userState.luxuryLimit)?"":"disable"}}' bindtap='buyLuxury' data-id='{{item.id}}'>购 买</view>
          <view class='btn-mini2 {{(tools.isEnableBtn(userState.hours,userState.luxuryLimit)&&tools.arrayContain(userState.myLuxuryArray,item.id))?"":"disable"}}'
           bindtap='sellLuxury' data-id='{{item.id}}'>出 售</view>
      </view>
    </view>
  </view>
</template>

<template name="popMyLuxury">
  <view class='pop pop2' hidden='{{!myLuxuryShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-6.png' ></image>
      <text>仪丈排场</text>
      <view class='off' bindtap='closeMyLuxury'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每天会有日常维护费</text>
          </view>
      </view>
      
      <view class='feed2 clearfix' wx:for='{{luxuryItems}}' wx:key='id' wx:if='{{tools.arrayContain(userState.myLuxuryArray,item.id)}}'>
          <view class='feed2-left'>
              <view class='job'>{{item.title}}</view>
              <view class='money'>购买价格：{{item.buyPrice}}</view>
              <view class='money money2'>出售价格：{{item.sellPrice}}</view>
              <view>
                  <text>{{item.remarks}}</text>
                  <text>拥有：{{tools.getHaveNumber(userState.myLuxuryNumber,item.id)}}</text>
              </view>
          </view>
          <view class='btn-mid2 {{(tools.isEnableBtn(userState.hours,userState.luxuryLimit)&&tools.arrayContain(userState.myLuxuryArray,item.id))?"":"disable"}}'
            bindtap='sellLuxury' data-id='{{item.id}}'>出 售</view>
      </view>
      
    </view>
  </view>
</template>


<template name="popLuck">
  <view class='pop pop2' hidden='{{!luckShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-4.png' ></image>
      <text>时来运转</text>
      <view class='off' bindtap='closeLuck'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for="{{luckItems}}" wx:key="id">
            <view class='feed2-left'>
                <view class='job'>{{item.title}}</view>
                <view class='money'>
                    <text>投{{item.investPrice}}</text>
                </view>
                <view>有概率获得{{item.gainPrice}}钱</view>
            </view>
            <view class='btn-mid {{tools.isEnableBtn(userState.hours,userState.luckLimit)?"":"disable"}}' bindtap='applyLuck' data-id='{{item.id}}'>试一次</view>
        </view>
    </view>
  </view>
</template>



<template name="popCouple">
  <view class='pop pop2' hidden='{{!coupleShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-6.png' ></image>
      <text>食色性也</text>
      <view class='off' bindtap='closeCouple'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text >每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{coupleItems}}' wx:key='id'>
        <view class='feed2-left'>
          <view class='job'>{{item.title}}</view>
          <view class='money'>
            <text>{{tools.getCoupleStateName(coupleState,item.id)}}</text>
            <image wx:if='{{tools.isCouple(coupleState,item.id)}}' src='{{tools.getCoupleStateAvatar(coupleState,item.id)}}' class='user-photo' mode='widthFix'></image>
          </view>
          <view>{{item.remarks}}</view>
        </view>
        <view wx:if='{{userState.myCoupleId===item.id}}' class='mf-btn2 {{tools.isEnableBtn(userState.hours,userState.coupleLimit)?"":"disable"}}' 
        bindtap='breakUp' data-id='{{item.id}}'></view>
        <view wx:else class='mf-btn  {{tools.isEnableBtn(userState.hours,userState.coupleLimit)?"":"disable"}}' bindtap='relationship' data-id='{{item.id}}'></view>
      </view>
    </view>
  </view>
</template>

<template name="popMyCouple">
  <view class='pop pop2' hidden='{{!myCoupleShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-6.png' ></image>
      <text>我的伴侣</text>
      <view class='off' bindtap='closeMyCouple'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text></text>
          </view>
      </view>
      <view class='feed2 clearfix' wx:for='{{coupleItems}}' wx:key='id' wx:if='{{userState.myCoupleId===item.id}}'>
        <view class='feed2-left'>
          <view class='job'>{{item.title}}</view>
          <view class='money'>
            <text>当前对象：{{userData.nickName}}</text>
            <image src='{{userData.avatarUrl}}' class='user-photo' mode='widthFix'></image>
          </view>
          <view>{{item.remarks}}</view>
        </view>
        <view class='mf-btn2 {{(tools.isEnableBtn(userState.hours,userState.coupleLimit)&&userState.myCoupleId===item.id)?"":"disable"}}' 
        bindtap='breakUp' data-id='{{item.id}}'></view>
      </view>
    </view>
  </view>
</template>

<template name="popTip">
  <view class='pop pop2' hidden='{{!tipShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/ques.png' ></image>
      <text>提示</text>
      <view class='off' bindtap='closeTip'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='feed2 clearfix' wx:for='{{tipItems}}' wx:key='id'>
        <view class='feed2-left' style="width:100%">
          <view class='money'>{{item.title}}</view>
          <view >{{item.remarks}}</view>
        </view>
      </view>
    </view>
  </view>
</template>




<template name="popFund">
  <view class='pop pop2' hidden='{{!fundShow}}'>
    <view class='pop2-title clearfix'>
      <image src='../../img/btn-3.png' ></image>
      <text>时来运转</text>
      <view class='off' bindtap='closeFund'>
        <image src='../../img/off.png'></image>
      </view>
    </view>
    <view class='pop-main'>
      <view class='tip'>
          <view class='tip-inner'>
              <image src='../../img/t.png' mode='widthFix'></image>
              <text>每次消耗 1 个小时，每日限 1 次</text>
          </view>
      </view>
       <view class='feed2 clearfix' wx:for="{{fundItems}}" wx:key="id">
            <view class='feed2-left'>
                <view class='job'>{{item.title}}</view>
                <view class='money'>
                    <text>{{userState.myFundArray.includes(item.id)?'投资':'未投资'}}</text>
                    <text class='percent {{item.increase>0?"up":"down"}}'>{{item.increase}}%</text>
                    <image src='../../img/arrow-{{item.increase>0?"up":"down"}}.png' mode='widthFix'></image>
                </view>
                <view>{{item.remarks}}</view>
            </view>
            <view class='btn-mid' class='btn-mid {{tools.isEnableBtn(userState.hours,userState.fundLimit)?"":"disable"}}' bindtap='actionFundDetail' data-item='{{item}}'>去看看</view>
        </view>
       </view>
  </view>
</template>
<template name="popFundDetail">
  <view class='pop pop2' hidden='{{!fundDetailShow}}'>
      <view class='pop2-title clearfix'>
          <image src='../../img/btn-3.png' ></image>
          <text style='margin-left:40rpx;'>{{fundItem.title}}</text>
          <view class='off' bindtap='closeFundDetail'>
            <image src='../../img/off.png'></image>
          </view>
      </view>
      <view class='pop-main'>
          <view class='item-box item-box2 item-box3 clearfix'>
              <view class="one">
                  <view class="one-inner clearfix">
                      <text class='clearfix'>
                          <text>可用金额</text>
                      </text>
                      <text class="num-big">
                          <text class="numFont color2">{{userState.money}}</text>
                      </text>
                  </view>
              </view>
              <view class="one">
                  <view class="one-inner clearfix">
                      <text class='clearfix'>
                          <text>已经投资</text>
                      </text>
                      <text class="num-big">
                          <text class="numFont color2">{{fundMoney}}</text>
                      </text>
                  </view>
              </view>
              <view class="one">
                  <view class="one-inner clearfix">
                      <text class='clearfix'>
                          <text>今日涨跌</text>
                      </text>
                      <text class="num-big">
                          <!-- <text class="numFont down">-34.3%</text> -->
                          <text class='numFont {{fundItem.increase>0?"up":"down"}}'>{{fundItem.increase}}%</text>
                      </text>
                  </view>
              </view>
          </view>
          <view class='chart' id='cvsWrap' style='height:300rpx;'>
          <canvas canvas-id="kline" style='width:{{canvasWidth}}px; height:{{canvasHeight}}px;'></canvas>
          </view>
          <view class='chart-input clearfix'>
              <input type='number' placeholder='请输入买入金额'></input>
              <button class='begin-btn'>确认买入</button>
          </view>
          <view class='chart-input clearfix'>
              <input type='number' placeholder='请输入买入金额'></input>
              <button class='begin-btn begin-btn2'>确认卖出</button>
          </view>
      </view>
  </view>
</template>
